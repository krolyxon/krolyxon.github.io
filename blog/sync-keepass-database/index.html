<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Syncing keepass database between android and desktop with rsync | Krolyxon's webpage</title>
<meta name=keywords content><meta name=description content="Introduction to keepass Everyone should use password managers, because remembering unique passwords is difficult. There are many great password FOSS password managers such as bitwarden, keepass, keepassxc etc. I wouldnt recommend using bitwarden because its cloud based, Your password database is being stored in cloud, and it makes me really paranoid. because there are thousands of users using it, so a lot of hackers trying to hack bitwarden&rsquo;s server. bitwarden allows you to self-host it, so you can host it in your own server."><meta name=author content="Me"><link rel=canonical href=https://krolyxon.github.io/blog/sync-keepass-database/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://krolyxon.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://krolyxon.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://krolyxon.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://krolyxon.github.io/apple-touch-icon.png><link rel=mask-icon href=https://krolyxon.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://krolyxon.github.io/blog/sync-keepass-database/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Syncing keepass database between android and desktop with rsync"><meta property="og:description" content="Introduction to keepass Everyone should use password managers, because remembering unique passwords is difficult. There are many great password FOSS password managers such as bitwarden, keepass, keepassxc etc. I wouldnt recommend using bitwarden because its cloud based, Your password database is being stored in cloud, and it makes me really paranoid. because there are thousands of users using it, so a lot of hackers trying to hack bitwarden&rsquo;s server. bitwarden allows you to self-host it, so you can host it in your own server."><meta property="og:type" content="article"><meta property="og:url" content="https://krolyxon.github.io/blog/sync-keepass-database/"><meta property="og:image" content="https://krolyxon.github.io/122"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-09-18T00:00:00+00:00"><meta property="article:modified_time" content="2022-09-18T00:00:00+00:00"><meta property="og:site_name" content="Krolyxon's Site"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://krolyxon.github.io/122"><meta name=twitter:title content="Syncing keepass database between android and desktop with rsync"><meta name=twitter:description content="Introduction to keepass Everyone should use password managers, because remembering unique passwords is difficult. There are many great password FOSS password managers such as bitwarden, keepass, keepassxc etc. I wouldnt recommend using bitwarden because its cloud based, Your password database is being stored in cloud, and it makes me really paranoid. because there are thousands of users using it, so a lot of hackers trying to hack bitwarden&rsquo;s server. bitwarden allows you to self-host it, so you can host it in your own server."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://krolyxon.github.io/blog/"},{"@type":"ListItem","position":2,"name":"Syncing keepass database between android and desktop with rsync","item":"https://krolyxon.github.io/blog/sync-keepass-database/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Syncing keepass database between android and desktop with rsync","name":"Syncing keepass database between android and desktop with rsync","description":"Introduction to keepass Everyone should use password managers, because remembering unique passwords is difficult. There are many great password FOSS password managers such as bitwarden, keepass, keepassxc etc. I wouldnt recommend using bitwarden because its cloud based, Your password database is being stored in cloud, and it makes me really paranoid. because there are thousands of users using it, so a lot of hackers trying to hack bitwarden\u0026rsquo;s server. bitwarden allows you to self-host it, so you can host it in your own server.","keywords":[],"articleBody":"Introduction to keepass Everyone should use password managers, because remembering unique passwords is difficult. There are many great password FOSS password managers such as bitwarden, keepass, keepassxc etc. I wouldnt recommend using bitwarden because its cloud based, Your password database is being stored in cloud, and it makes me really paranoid. because there are thousands of users using it, so a lot of hackers trying to hack bitwarden’s server. bitwarden allows you to self-host it, so you can host it in your own server.\nBut you know, your boy is still paranoid. So i will go with keepassxc because its completely offlilne. You can read the installation instructions and read more about it on keepassxc.org However, we are going focus more about how to sync the password database created from keepassxc on your desktop and cellphone(android).\nAfter you are done installing keepassxc on your desktop, install keepassdx on your cellphone, To access your encrypted password database from your cellphone.\nSync the database between both devices. Install rsync and ssh(obviously…) on your desktop. Install termux on your cellphone. install rsync \u0026 openssh on termux by running pkg install openssh rsync start ssh server on termux by running sshd get your local ip adress of your cellphone by running ifconfig Once you are done with that, go to the terminal on your desktop and run this command:\nrsync -vrP --delete --rsh='ssh -p 8022' ~/passdb/on/desktop.kbdx username@ip:passdb/on/cellphone.kbdx here i specify the port with --rsh='ssh -p 8022' because specifying it with --port flag didng work for me. repace your username with your username and local ip adress of termux in username@ip. and repace the paths in the commands to where your password database is stored in your desktop and cellphone. and here we go, it will sync the database.\nHowever, i wanted to go further and make it a bit automaticish, so i ended up with this script.\n#!/bin/sh # paths of database file locations in android and desktop anpath=\"storage/shared/path/to/pass-database.kdbx\" deskpath=\"path/to/pass-database.kdbx\" # getting last modified date desktop=$(stat -c%Y $deskpath) android=$(ssh android -t stat -c%Y $anpath) # syncing the database between both devices by calculating # in which device the password database was last modified. # not syncing anything if there was no change. if [ $android -lt $desktop ]; then echo \"transferring from desktop to android\" rsync -vrtP $deskpath android:$anpath elif [ $desktop -lt $android ]; then echo \"transferring from android to desktop\" rsync -vrtP android:$anpath $deskpath elif [ $desktop -eq $android ]; then echo \"nothing was modified, not syncing\" fi When i run this script, it will check in which device i had the password database last modified, and sync the password databse from desktop to cellphone if it was last modified on my desktop computer and vice versa.\nThank you for reading my blog with bajillions of spelling \u0026 grammar mistakes.\n","wordCount":"468","inLanguage":"en","datePublished":"2022-09-18T00:00:00Z","dateModified":"2022-09-18T00:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://krolyxon.github.io/blog/sync-keepass-database/"},"publisher":{"@type":"Organization","name":"Krolyxon's webpage","logo":{"@type":"ImageObject","url":"https://krolyxon.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://krolyxon.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://krolyxon.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://krolyxon.github.io/blog title=Blog><span>Blog</span></a></li><li><a href=https://krolyxon.github.io/about/ title="About Me"><span>About Me</span></a></li><li><a href=https://krolyxon.github.io/contact/ title=Contact><span>Contact</span></a></li><li><a href=https://krolyxon.github.io/links/ title=Links><span>Links</span></a></li><li><a href=https://krolyxon.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://krolyxon.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://krolyxon.github.io/blog/>Blogs</a></div><h1 class=post-title>Syncing keepass database between android and desktop with rsync</h1><div class=post-meta><span title='2022-09-18 00:00:00 +0000 UTC'>September 18, 2022</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;468 words&nbsp;·&nbsp;Me</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#introduction-to-keepass aria-label="Introduction to keepass">Introduction to keepass</a></li><li><a href=#sync-the-database-between-both-devices aria-label="Sync the database between both devices.">Sync the database between both devices.</a></li></ul></div></details></div><div class=post-content><h1 id=introduction-to-keepass>Introduction to keepass<a hidden class=anchor aria-hidden=true href=#introduction-to-keepass>#</a></h1><p>Everyone should use password managers, because remembering unique passwords is difficult.
There are many great password FOSS password managers such as bitwarden, keepass, keepassxc etc.
I wouldnt recommend using bitwarden because its cloud based,
Your password database is being stored in cloud, and it makes me really paranoid.
because there are thousands of users using it, so a lot of hackers trying to hack bitwarden&rsquo;s server.
bitwarden allows you to self-host it, so you can host it in your own server.</p><p>But you know, your boy is still paranoid. So i will go with keepassxc because its completely offlilne.
You can read the installation instructions and read more about it on <a href=https://keepassxc.org>keepassxc.org</a>
However, we are going focus more about how to sync the password database created from keepassxc on
your desktop and cellphone(android).</p><p>After you are done installing keepassxc on your desktop,
install <a href=https://www.keepassdx.com/>keepassdx</a> on your cellphone,
To access your encrypted password database from your cellphone.</p><h1 id=sync-the-database-between-both-devices>Sync the database between both devices.<a hidden class=anchor aria-hidden=true href=#sync-the-database-between-both-devices>#</a></h1><ol><li>Install <a href=https://rsync.samba.org/>rsync</a> and ssh(obviously&mldr;) on your desktop.</li><li>Install termux on your cellphone.</li><li>install <code>rsync</code> & <code>openssh</code> on termux by running <code>pkg install openssh rsync</code></li><li>start ssh server on termux by running <code>sshd</code></li><li>get your local ip adress of your cellphone by running <code>ifconfig</code></li></ol><p>Once you are done with that, go to the terminal on your desktop and run this command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rsync -vrP --delete --rsh<span class=o>=</span><span class=s1>&#39;ssh -p 8022&#39;</span> ~/passdb/on/desktop.kbdx username@ip:passdb/on/cellphone.kbdx 
</span></span></code></pre></div><p>here i specify the port with <code>--rsh='ssh -p 8022'</code> because specifying it with <code>--port</code> flag didng work for me.
repace your username with your username and local ip adress of termux in <code>username@ip</code>.
and repace the paths in the commands to where your password database is stored in your desktop and cellphone.
and here we go, it will sync the database.</p><p>However, i wanted to go further and make it a bit <em>automaticish</em>, so i ended up with this script.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/sh
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># paths of database file locations in android and desktop</span>
</span></span><span class=line><span class=cl><span class=nv>anpath</span><span class=o>=</span><span class=s2>&#34;storage/shared/path/to/pass-database.kdbx&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>deskpath</span><span class=o>=</span><span class=s2>&#34;path/to/pass-database.kdbx&#34;</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># getting last modified date</span>
</span></span><span class=line><span class=cl><span class=nv>desktop</span><span class=o>=</span><span class=k>$(</span>stat -c%Y <span class=nv>$deskpath</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>android</span><span class=o>=</span><span class=k>$(</span>ssh android -t stat -c%Y <span class=nv>$anpath</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># syncing the database between both devices by calculating</span>
</span></span><span class=line><span class=cl><span class=c1># in which device the password database was last modified.</span>
</span></span><span class=line><span class=cl><span class=c1># not syncing anything if there was no change.</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$android</span> -lt <span class=nv>$desktop</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;transferring from desktop to android&#34;</span>
</span></span><span class=line><span class=cl>  rsync -vrtP <span class=nv>$deskpath</span> android:<span class=nv>$anpath</span> 
</span></span><span class=line><span class=cl><span class=k>elif</span> <span class=o>[</span> <span class=nv>$desktop</span> -lt <span class=nv>$android</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;transferring from android to desktop&#34;</span>
</span></span><span class=line><span class=cl>  rsync -vrtP android:<span class=nv>$anpath</span> <span class=nv>$deskpath</span>
</span></span><span class=line><span class=cl><span class=k>elif</span> <span class=o>[</span> <span class=nv>$desktop</span> -eq <span class=nv>$android</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;nothing was modified, not syncing&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><p>When i run this script, it will check in which device i had the password database last modified,
and sync the password databse from desktop to cellphone if it was last modified on my desktop computer and vice versa.</p><p>Thank you for reading my blog with bajillions of spelling & grammar mistakes.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://krolyxon.github.io/>Krolyxon's webpage</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>